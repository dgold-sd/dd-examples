{"title":"SQLServer - Overview Example","description":"This dashboard gives you a high-level view of SQL Server's health and performance, plus more specific views of SQL Server metrics over time. Further reading on SQL Server monitoring:\n\n- [Datadog's SQL Server integration docs](https://docs.datadoghq.com/integrations/sqlserver/)\n\n- [Collect SQL Server Custom Metrics](https://docs.datadoghq.com/integrations/guide/collect-sql-server-custom-metrics/#pagetitle)\n\n- [Key metrics for SQL Server monitoring](https://www.datadoghq.com/blog/sql-server-monitoring/)\n\n- [SQL Server monitoring tools](https://www.datadoghq.com/blog/sql-server-monitoring-tools/)\n\n- [Monitor SQL Server performance with Datadog](https://www.datadoghq.com/blog/sql-server-performance/)\n\n- [Custom SQL Server metrics for detailed monitoring](https://www.datadoghq.com/blog/sql-server-metrics/)\n\nClone this template dashboard to make changes and add your own graph widgets.","widgets":[{"id":0,"layout":{"x":0,"y":0,"width":12,"height":8},"definition":{"type":"image","url":"/static/images/saas_logos/bot/sql_server.png","sizing":"zoom"}},{"id":1,"layout":{"x":148,"y":6,"width":47,"height":15},"definition":{"title":"Buffer cache hit ratio","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"4h"},"type":"timeseries","requests":[{"q":"avg:sqlserver.buffer.cache_hit_ratio{$scope,$db,$env} by {host}","style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"line"}]}},{"id":2,"layout":{"x":148,"y":22,"width":47,"height":15},"definition":{"title":"Page life expectancy","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"1h"},"type":"timeseries","requests":[{"q":"avg:sqlserver.buffer.page_life_expectancy{$scope,$db,$env} by {host}","style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"line"}]}},{"id":3,"layout":{"x":148,"y":0,"width":47,"height":5},"definition":{"type":"note","content":"Buffer pool metrics","background_color":"gray","font_size":"18","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"bottom"}},{"id":4,"layout":{"x":49,"y":16,"width":47,"height":15},"definition":{"title":"User Connections","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"4h"},"type":"timeseries","requests":[{"q":"avg:sqlserver.stats.connections{$scope,$db,$env} by {host}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}]}},{"id":5,"layout":{"x":49,"y":33,"width":47,"height":15},"definition":{"title":"Batch Requests (per sec)","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"4h"},"type":"timeseries","requests":[{"q":"avg:sqlserver.stats.batch_requests{$scope,$db,$env} by {host}","style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"line"}]}},{"id":6,"layout":{"x":98,"y":29,"width":47,"height":15},"definition":{"title":"SQL compilations (per sec)","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"1h"},"type":"timeseries","requests":[{"q":"avg:sqlserver.stats.sql_compilations{$scope,$db,$env} by {host}","style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"area"}]}},{"id":7,"layout":{"x":197,"y":6,"width":47,"height":15},"definition":{"title":"Lock waits","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"1h"},"type":"timeseries","requests":[{"q":"avg:sqlserver.stats.lock_waits{$scope,$db,$env} by {host}","style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"line"}]}},{"id":8,"layout":{"x":197,"y":22,"width":47,"height":15},"definition":{"title":"Processes blocked","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"1h"},"type":"timeseries","requests":[{"q":"avg:sqlserver.stats.procs_blocked{$scope,$db,$env} by {host}","style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"line"}]}},{"id":9,"layout":{"x":68,"y":0,"width":14,"height":14},"definition":{"title":"User connections","title_size":"16","title_align":"left","time":{"live_span":"1h"},"type":"query_value","requests":[{"q":"avg:sqlserver.stats.connections{$scope,$env}","aggregator":"avg","conditional_formats":[{"comparator":">=","palette":"white_on_green","value":0}]}],"autoscale":true,"precision":2}},{"id":10,"layout":{"x":148,"y":38,"width":47,"height":15},"definition":{"title":"Checkpoint pages","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"1h"},"type":"timeseries","requests":[{"q":"avg:sqlserver.buffer.checkpoint_pages{$scope,$db,$env} by {host}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}]}},{"id":11,"layout":{"x":197,"y":0,"width":47,"height":5},"definition":{"type":"note","content":"Blocking metrics","background_color":"gray","font_size":"18","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"bottom"}},{"id":12,"layout":{"x":52,"y":0,"width":15,"height":14},"definition":{"title":"Batch requests","title_size":"16","title_align":"left","time":{"live_span":"1h"},"type":"query_value","requests":[{"q":"avg:sqlserver.stats.batch_requests{$scope,$env}","aggregator":"avg","conditional_formats":[{"comparator":">=","palette":"white_on_green","value":0}]}],"autoscale":true,"precision":2}},{"id":13,"layout":{"x":98,"y":45,"width":47,"height":15},"definition":{"title":"SQL re-compilations (per sec)","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"1h"},"type":"timeseries","requests":[{"q":"avg:sqlserver.stats.sql_recompilations{$scope,$db,$env} by {host}","style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"line"}]}},{"id":14,"layout":{"x":98,"y":23,"width":47,"height":5},"definition":{"type":"note","content":"Query plan metrics","background_color":"gray","font_size":"18","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"bottom"}},{"id":15,"layout":{"x":83,"y":0,"width":14,"height":14},"definition":{"title":"Buffer cache hit ratio","title_size":"16","title_align":"left","time":{"live_span":"1h"},"type":"query_value","requests":[{"q":"avg:sqlserver.buffer.cache_hit_ratio{$scope,$env}*100","aggregator":"avg","conditional_formats":[{"comparator":">=","palette":"white_on_green","value":0.9},{"comparator":"<","palette":"white_on_red","value":0.9}]}],"autoscale":false,"custom_unit":"%","precision":1}},{"id":16,"layout":{"x":98,"y":6,"width":47,"height":15},"definition":{"title":"Page splits (per sec)","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"1h"},"type":"timeseries","requests":[{"q":"avg:sqlserver.access.page_splits{$scope,$db,$env} by {host}","style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"line"}]}},{"id":17,"layout":{"x":98,"y":0,"width":47,"height":5},"definition":{"type":"note","content":"Page splits","background_color":"gray","font_size":"18","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"bottom"}},{"id":18,"layout":{"x":36,"y":16,"width":12,"height":32},"definition":{"type":"note","content":"Usage","background_color":"gray","font_size":"18","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"right"}},{"id":19,"layout":{"x":0,"y":50,"width":96,"height":5},"definition":{"type":"note","content":"Performance ([Details](https://app.datadoghq.com/dash/integration/33/sqlserver---metrics?from_ts=1616520809942&live=true&to_ts=1616524409942))","background_color":"gray","font_size":"18","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"bottom"}},{"id":20,"layout":{"x":98,"y":62,"width":47,"height":5},"definition":{"type":"note","content":"Backup / Restore","background_color":"gray","font_size":"18","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"bottom"}},{"id":21,"layout":{"x":0,"y":57,"width":47,"height":21},"definition":{"title":"Log File Size","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"q":"avg:sqlserver.db.log_file_size{$db,$env} by {db}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}]}},{"id":22,"layout":{"x":49,"y":57,"width":47,"height":21},"definition":{"title":"Transactions/sec","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"q":"avg:sqlserver.db.transactions_per_sec{$db,$env} by {db}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}]}},{"id":23,"layout":{"x":-7,"y":103,"width":47,"height":21},"definition":{"title":"Data File SIze","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"q":"avg:sqlserver.db.data_file_size{$db,$env} by {db}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}]}},{"id":24,"layout":{"x":0,"y":80,"width":47,"height":21},"definition":{"title":"Log File Used Size","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"q":"avg:sqlserver.db.log_file_used_size{$db,$env} by {db}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}]}},{"id":25,"layout":{"x":148,"y":55,"width":47,"height":5},"definition":{"type":"note","content":"Logs","background_color":"gray","font_size":"18","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"bottom"}},{"id":26,"layout":{"x":0,"y":126,"width":47,"height":21},"definition":{"title":"Commit Table Entries","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"q":"avg:sqlserver.db.commit_table_entries{$env}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}]}},{"id":27,"layout":{"x":49,"y":80,"width":47,"height":21},"definition":{"title":"Tracked Transactions/sec","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"q":"avg:sqlserver.db.tracked_transactions_per_sec{$env} by {db}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}]}},{"id":28,"layout":{"x":197,"y":39,"width":47,"height":5},"definition":{"type":"note","content":"APM","background_color":"gray","font_size":"18","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"bottom"}},{"id":29,"layout":{"x":197,"y":45,"width":61,"height":44},"definition":{"title":"Top Queries (Duration)","title_size":"16","title_align":"left","type":"toplist","requests":[{"q":"top(avg:trace.sqlserver.query.duration{$scope,$db,$env} by {resource_name}, 10, 'mean', 'desc')"}]}},{"id":30,"layout":{"x":197,"y":91,"width":61,"height":36},"definition":{"title":"Top Queries (Frequency)","title_size":"16","title_align":"left","type":"toplist","requests":[{"q":"top(sum:trace.sqlserver.query.hits{$scope,$db,$env} by {resource_name}.as_count(), 10, 'mean', 'desc')"}]}},{"id":31,"layout":{"x":98,"y":68,"width":22,"height":14},"definition":{"title":"Num Backups - past week","title_size":"16","title_align":"left","time":{"live_span":"1w"},"type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"white_on_green","value":0},{"comparator":"<=","palette":"white_on_red","value":0}],"log_query":{"index":"*","search":{"query":"service:sqlserver \"backup database\" $env"},"group_by":[],"compute":{"aggregation":"count"}}}],"autoscale":true,"precision":2}},{"id":32,"layout":{"x":98,"y":84,"width":47,"height":15},"definition":{"title":"Database Backups - Past Week","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1w"},"type":"timeseries","requests":[{"log_query":{"index":"*","search":{"query":"service:sqlserver \"backup database\" $env"},"group_by":[{"facet":"host","sort":{"order":"desc","aggregation":"count"},"limit":10}],"compute":{"aggregation":"count"}},"style":{"palette":"dog_classic"},"display_type":"bars"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]}},{"id":33,"layout":{"x":98,"y":100,"width":47,"height":15},"definition":{"title":"Database Restores - Past Week","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1w"},"type":"timeseries","requests":[{"log_query":{"index":"*","search":{"query":"service:sqlserver \"restore database\" $env"},"group_by":[{"facet":"host","sort":{"order":"desc","aggregation":"count"},"limit":10}],"compute":{"aggregation":"count"}},"style":{"palette":"dog_classic"},"display_type":"bars"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]}},{"id":34,"layout":{"x":123,"y":68,"width":22,"height":14},"definition":{"title":"Num Restores - past week","title_size":"16","title_align":"left","time":{"live_span":"1w"},"type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"white_on_green","value":0},{"comparator":"<=","palette":"white_on_red","value":0}],"log_query":{"index":"*","search":{"query":"service:sqlserver \"restore database\" $env"},"group_by":[],"compute":{"aggregation":"count"}}}],"autoscale":true,"precision":2}},{"id":36,"layout":{"x":36,"y":0,"width":15,"height":14},"definition":{"title":"Failed Logins - Past Week","title_size":"13","title_align":"left","time":{"live_span":"1w"},"type":"query_value","requests":[{"conditional_formats":[{"comparator":">=","palette":"white_on_red","value":1}],"log_query":{"index":"*","search":{"query":"service:sqlserver \"Login failed\" $env"},"group_by":[],"compute":{"aggregation":"count"}}}],"autoscale":true,"precision":0}},{"id":39,"layout":{"x":49,"y":103,"width":47,"height":21},"definition":{"title":"Cache Hit Ratio (by Host)","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"avg:sqlserver.buffer.cache_hit_ratio{$env} by {host}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]}},{"id":40,"layout":{"x":49,"y":126,"width":47,"height":21},"definition":{"title":"Buffer Page Lookups (by host)","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"q":"avg:sqlserver.buffer.page_lookups{$env} by {host}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}]}},{"id":3188947039197514,"layout":{"x":148,"y":61,"width":47,"height":71},"definition":{"type":"log_stream","logset":"52281","query":"service:sqlserver $env","columns":["core_host","core_service"]}},{"id":8146335447549628,"layout":{"x":17,"y":0,"width":17,"height":8},"definition":{"title":"SQL Server - Agents Up","title_size":"13","title_align":"left","type":"check_status","check":"sqlserver.can_connect","grouping":"cluster","group_by":[],"tags":[]}},{"id":7760054185418778,"layout":{"x":0,"y":9,"width":34,"height":19},"definition":{"title":"SQL Server Monitor Status","title_size":"13","title_align":"left","type":"manage_status","summary_type":"groups","display_format":"countsAndList","color_preference":"background","hide_zero_counts":true,"query":"SQL Server $env","sort":"status,asc","count":50,"start":0}},{"id":4787449539403941,"layout":{"x":0,"y":28,"width":34,"height":20},"definition":{"title":"SQL Server Events","title_size":"13","title_align":"left","type":"event_stream","query":"\"host:MSSQL\" OR \"SQL Server\" $env","tags_execution":"and","event_size":"s"}}],"template_variables":[{"name":"scope","default":"*"},{"name":"db","default":"*","prefix":"db"},{"name":"env","default":"*","prefix":"env"}],"layout_type":"free","is_read_only":true,"notify_list":[],"id":"aum-ssg-i9v"}
